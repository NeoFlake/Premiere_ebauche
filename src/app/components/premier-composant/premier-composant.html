<div class="form-container">
    <h2>Recherche de cartes Altered</h2>
    <form [formGroup]="form" (ngSubmit)="getValue()">
        <!-- À factoriser -->
        <div formArrayName="factions">
            <span>Factions : </span>
            @for (faction of factions.controls; track $index) {
            <label>
                <input type="checkbox" [formControlName]="$index" />
                {{ FACTION_OPTIONS[$index].libelle }}
            </label>
            }
        </div>
        <!-- À factoriser -->
        <div formArrayName="rarities">
            <span>Raretés : </span>
            @for (rarity of rarities.controls; track $index) {
            <label>
                <input type="checkbox" [formControlName]="$index" />
                {{ RARITY_OPTIONS[$index].libelle }}
            </label>
            }
        </div>
        <!-- À factoriser -->
        <div formArrayName="types">
            <span>Types : </span>
            @for (type of types.controls; track $index) {
            <label>
                <input type="checkbox" [formControlName]="$index" />
                {{ TYPE_OPTIONS[$index].libelle }}
            </label>
            }
        </div>
        <!-- À factoriser -->
        <div formArrayName="sets">
            <span>Sets : </span>
            @for (set of sets.controls; track $index) {
            <label>
                <input type="checkbox" [formControlName]="$index" />
                {{ SET_OPTIONS[$index].libelle }}
            </label>
            }
        </div>
        <!-- À factoriser -->
        <div formArrayName="mainCosts">
            <span>Coût de main : </span>
            @for (mainCost of mainCosts.controls; track $index) {
            <label>
                <input type="checkbox" [formControlName]="$index" />
                {{ $index + 1 }}
            </label>
            }
        </div>
        <!-- À factoriser -->
        <div formArrayName="recallCosts">
            <span>Coût de réserve : </span>
            @for (recallCost of recallCosts.controls; track $index) {
            <label>
                <input type="checkbox" [formControlName]="$index" />
                {{ $index + 1 }}
            </label>
            }
        </div>
        <div>
            <span>Attribut : </span>
            <div formArrayName="forestCaracValues">
                <span>Forêt : </span>
                @for (forestCaracValue of forestCaracValues.controls; track $index) {
                <label>
                    <input type="checkbox" [formControlName]="$index" />
                    {{ $index + 1 }}
                </label>
                }
            </div>
            <div formArrayName="mountainCaracValues">
                <span>Montagne : </span>
                @for (mountainCaracValue of mountainCaracValues.controls; track $index) {
                <label>
                    <input type="checkbox" [formControlName]="$index" />
                    {{ $index + 1 }}
                </label>
                }
            </div>
            <div formArrayName="oceanCaracValues">
                <span>Forêt : </span>
                @for (oceanCaracValue of oceanCaracValues.controls; track $index) {
                <label>
                    <input type="checkbox" [formControlName]="$index" />
                    {{ $index + 1 }}
                </label>
                }
            </div>
        </div>
        <!-- À factoriser -->
        <div class="dropdown" (clickOutside)="closeDropdown()">
            <button type="button" (click)="toggleDropdown()" class="dropdown-toggle">
                Mots clés
            </button>

            @if (dropdownOpen) {
            <div class="dropdown-menu">
                <label *ngFor="let keyword of KEYWORD_OPTIONS">
                    <input type="checkbox" [value]="keyword.value" [checked]="keywords.value.includes(keyword.value)"
                        (change)="onKeywordToggle($event)" />
                    {{ keyword.libelle }}
                </label>
            </div>
            }
        </div>
        <div>
            <label>{{ ALT_ART_OPTION }}</label>
            <input type="checkbox" formControlName="altArt" />
        </div>
        <div>
            <label>{{ NAME_OPTION }}</label>
            <input type="text" formControlName="name" placeholder="..." />
        </div>
        <div>
        </div>
        <div>
            <button type="submit">Rechercher</button>
        </div>
    </form>
</div>
<div class="cards-container">
    <h2>Retour de l'API Rest Altered</h2>
    @if (rechercheEffectuee){
    @if(nombresCartesTrouvees > 0) {
    <div id="how-much-area">
        {{ nombresCartesTrouvees }}
        @if(nombresCartesTrouvees > 1) {
        <span>cartes trouvées</span>
        }
        @else {
        <span>carte trouvée</span>
        }
    </div>
    }
    @else {
    <div>
        <span>Aucun résultat</span>
    </div>
    }
    }
    <div id="card-container">
        @for (element of affichageBasique; track $index) {
            <card [card]="element"></card>    
        }
    </div>
</div>